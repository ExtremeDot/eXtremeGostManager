# eXtremeGostManager


### معرفی پروژه eXtreme Gost Manager

- اسکریپت مدیریت حرفه‌ای تونل GOST برای سناریوی ایران ↔ خارج
- طراحی شده برای پیاده‌سازی امن، ماژولار و قابل مدیریت تونل TCP بین دو سرور.
- نسخه فعلی: 2.2.1

  

<img width="922" height="725" alt="image" src="https://github.com/user-attachments/assets/f155f2f5-f691-477b-a677-68591ea20758" />


این یک اسکریپت Bash مبتنی بر منوی تعاملی است که امکان راه‌اندازی، مدیریت و مانیتورینگ تونل GOST را بین:

- سرور ایران (Forward / Entry Node)
- سرور خارج (Main VPN / Relay Node)

فراهم می‌کند.

این ابزار برای سناریوهایی طراحی شده که:
 
- سرور اصلی VPN در خارج قرار دارد
- کاربران داخل ایران به سرور ایران (Entry/Forward Node) متصل می‌شوند و ترافیک‌شان از طریق تونل GOST به سرور خارج (Relay/Main Node) منتقل شده و از آنجا به اینترنت می‌رسد.


----

### معماری شبکه

```
[ Client Inside Iran ]
           |
           v
    +------------------+
    |   IRAN SERVER    |
    |  (Forward Node)  |
    +------------------+
           |
   Encrypted GOST Tunnel
           |
           v
    +------------------+
    | FOREIGN SERVER   |
    |  (VPN + Relay)   |
    +------------------+
           |
           v
        Internet
```
### نقش‌ها
### سرور ایران

- اجرای GOST در حالت Forward
- فوروارد پورت‌های مشخص شده
- نقطه ورود کاربران داخلی
- فاقد سرویس VPN اصلی

### سرور خارج

- اجرای GOST در حالت Bind / Reverse
- میزبانی سرویس VPN اصلی (Xray, OpenVPN و غیره)
- دریافت اتصال از سرور ایران


-----------
### نصب

```
curl -H 'Cache-Control: no-cache' "https://raw.githubusercontent.com/ExtremeDot/eXtremeGostManager/master/ex_gost_manager.sh?$RANDOM" -o ex_gost_manager.sh && chmod +x ex_gost_manager.sh
mv ex_gost_manager.sh /usr/local/bin/extGostManager && chmod +x /usr/local/bin/extGostManager
```
### اجرای منو 

```
extGostManager
```

### برای حذف اسکریپت 
```
rm /usr/local/bin/extGostManager
```
---
### مراحل راه‌اندازی

1- اجرا روی سرور خارج

2- انتخاب نقش Foreign

3- تعیین Tunnel Port

4- تعیین Forward Ports

5- فعال‌سازی احراز هویت (توصیه می‌شود)

سپس:

1- اجرا روی سرور ایران

2- انتخاب نقش Iran

3- وارد کردن IP سرور خارج

4- وارد کردن پورت تونل

5- تعیین پورت‌های فوروارد

### راه اندازی اولیه


روی هر دو سرور گزینه 1 را بزنید تا پیش نیاز ها نصب شود و سپس گزینه 2 رو بزنید و اطلاعات رو وارد کنید.

گزینه 2 رو که بزنید ازتون میپرسه که سرورتون خارج هست یا داخل؟ با وارد کردن شماره 1 یا 2 تایید کنید

بعدش ای پی ایران رو ازتون میپرسه، آی پی واقعی سرور رو باید وارد کنید

بعد از اون آی پی خارج

بعدش ازتون پورت برقراری تانل گاست رو میپرسه، پیشفرض روی 2053 گذاشتم

بعد ازتون میپرسه کدوم پورت ها رو میخواید فوروارد کنید؟ با فاصله مشخص کنید، اگر میخواید حالت پیش فرض باشه اینتر رو بزنید 443 33000 80 2087

پورت 33000 رو گذاشتم برای برقرار تست روی iperf

بعد ازتون میپرسه میخواد پسورد ست کنید؟ با تایپ کردن yes یا no جواب بدید،حالت پیش فرض no هست،

اگر yes رو زدید یوزر و پسورد رو برای تانل تایپ کنید ،

دقت کنید باید برای سرور داخل و خارج تمامی این اطلاعات شبیه هم باشند.

.در انتها مشخصات وارد شده در بالای پنل براتون نمایش داده میشه، Server Role مشخص میکنه که سروری که انتخاب کردید سرور ایران iran هست یا خارج foreign


<img width="731" height="235" alt="image" src="https://github.com/user-attachments/assets/e64942b5-6684-47ee-bcf5-ca1ca7373ed8" />


بعد از اون میتونید نوع تانل رو انتخاب کنید، روی هر دو سرور باید سرورها شبیه هم انتخاب شوند.

------
### برای تست سرعت تانل و چک کردن تانل که آیا کار میده یا خیر؟

بعد از اینکه تانل رو برقرار کردید ( در صورتی که پورت 33000 برای فوروارد انتخاب شده باشد، حالت پیشفرض توی اسکریپت تعریف شده است.)


- روی سرور خارج گزینه

```88) Speed Test using iperf3```

رو بزنید تا iperf3 در حالت آماده باش برای انجام تست بر روی تانل gost قرار بگیره.


- حالا روی سرور ایران گزینه 

```88) Speed Test using iperf3```

رو بزنید تا شروع کنه به تست گرفتن.

اگه اتصال برقرار باشه ، شروع میکنه به تست گرفتن و اطلاعات مربوط به انتقال دیتا و سرعت انتقال رو بهتون نشون میده، مطابق تصویر زیر:

<img width="1722" height="597" alt="image" src="https://github.com/user-attachments/assets/f72fa26f-5e49-4216-a9d7-83f214af9ef8" />


برای خروج از حالت تست روی سرور از کلیدهای ```Ctrl+C``` استفاده کنید.

----
### روش دوم تست اتصال بصورت دستی

روی سرور خارج دستور زیر رو اجرا میکنیم ، با توجه به اینکه پورت 2087 رو برای فوروارد فعال کردیم:

```
gost -L tcp://:2087 -F tcp://checkip.amazonaws.com:80
```


روی سرور ایران دستور زیر رو اجرا میکنیم، و باید ای پی سرور خارج رو بهمون نشون بده.

```
curl 127.0.0.1:2087
```


----

### سناریوهای پیشنهادی استفاده

- عبور از محدودیت‌های مسیریابی داخلی
- کاهش Packet Loss در لینک‌های بین‌المللی
- مخفی‌سازی ترافیک VPN اصلی
-افزایش پایداری سرویس کاربران داخل کشور

----

### دستورهای کاربردی

- چک کردن پورت های اجرا شده در لینوکس
```
lsof -i -P -n | grep LIST
```

- تست آی پی پراکسی ساکس روی پورت 10808 
```
curl --socks5 socks5://localhost:10808 https://api.ipify.org?format=json
```

- تست DNS 
```
nslookup github.com
```

